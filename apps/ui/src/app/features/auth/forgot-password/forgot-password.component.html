<div class="page-bg">
  <div class="forgot-password-card">
    <!-- Success State -->
    <div *ngIf="emailSent" class="success-state">
      <div class="login-brand">
        <div class="login-brand-content">
          <div class="login-icon">
            <span nz-icon nzType="check-circle" class="brand-icon"></span>
          </div>
          <div class="login-title">Email Sent!</div>
          <div class="login-sub">Password reset instructions sent to {{ submittedEmail }}</div>
        </div>
      </div>

      <div class="login-body">
        <div class="success-content">
          <div class="success-message">
            <span nz-icon nzType="mail" class="success-icon"></span>
            <p class="success-text">
              We've sent password reset instructions to your email address.
              Please check your inbox and follow the link to reset your password.
            </p>
          </div>

          <div class="email-note">
            <span nz-icon nzType="info-circle" class="info-icon"></span>
            <div class="note-content">
              <p class="note-text">
                If you don't see the email, please check your spam folder.
                The reset link will expire in 1 hour.
              </p>
            </div>
          </div>

          <div class="action-buttons">
            <button type="button" class="btn btn-lg btn-primary login-primary" (click)="backToLogin()">
              <span nz-icon nzType="arrow-left" class="button-icon"></span>
              Back to Login
            </button>
            <button type="button" class="btn btn-lg btn-secondary secondary-button" (click)="resendEmail()">
              <span nz-icon nzType="reload" class="button-icon"></span>
              Resend Email
            </button>
          </div>
        </div>
      </div>

      <div class="login-footer">
        <div class="footer-content">
          <span class="credibility-text">Secure Password Reset • Email Verification</span>
          <span class="footer-text">Trust Blue Theme • Enterprise Security</span>
        </div>
      </div>
    </div>

    <!-- Form State -->
    <div *ngIf="!emailSent">
      <div class="login-brand">
        <div class="login-brand-content">
          <div class="login-icon">
            <span nz-icon nzType="lock" class="brand-icon"></span>
          </div>
          <div class="login-title">Forgot Password?</div>
          <div class="login-sub">No worries, we'll send you reset instructions</div>
        </div>
      </div>

      <div class="login-body">
        <form nz-form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="login-form" nzLayout="vertical">
          <!-- Email Field -->
          <nz-form-item class="login-field">
            <nz-form-label nzRequired class="login-label">Email Address</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid email address">
              <nz-input-group [nzPrefix]="emailPrefix">
                <input 
                  nz-input 
                  formControlName="email" 
                  placeholder="Enter your email address"
                  autocomplete="email"
                  [nzSize]="'large'"
                  class="login-input"
                  [attr.aria-invalid]="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched"
                />
                <ng-template #emailPrefix>
                  <span nz-icon nzType="mail" class="input-icon"></span>
                </ng-template>
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>

          <!-- Submit Button -->
          <button 
            type="submit"
            class="btn btn-lg btn-primary"
            [disabled]="forgotPasswordForm.invalid || isLoading"
          >
            [nzLoading]="isLoading"
            [disabled]="!forgotPasswordForm.valid"
            type="submit"
            class="login-primary"
          >
            {{ isLoading ? 'Sending...' : 'Send Reset Instructions' }}
          </button>

          <!-- Back to Login Link -->
          <div class="back-to-login">
            <a routerLink="/auth/login" class="forgot-link">
              <span nz-icon nzType="arrow-left" class="link-icon"></span>
              Back to login
            </a>
          </div>
        </form>
      </div>

      <div class="login-footer">
        <div class="footer-content">
          <span class="credibility-text">Secure Password Reset • Email Verification</span>
          <span class="footer-text">Trust Blue Theme • Enterprise Security</span>
        </div>
      </div>
    </div>
  </div>
</div>

