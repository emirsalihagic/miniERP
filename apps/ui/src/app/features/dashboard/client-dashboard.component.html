<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1>Welcome back, {{ currentUser?.name || currentUser?.email }}! <span nz-icon nzType="smile"></span></h1>
      <p *ngIf="clientInfo">Client: <strong>{{ clientInfo.name }}</strong></p>
      <p>Manage your orders, view invoices, and track your account status.</p>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <span nz-icon nzType="file-text"></span>
      </div>
      <div class="stat-content">
        <div class="stat-value" [class.loading]="loading">{{ loading ? '...' : (stats.totalInvoices || 0) }}</div>
        <div class="stat-label">All Invoices</div>
        <div class="stat-description">Total invoices</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <span nz-icon nzType="clock-circle"></span>
      </div>
      <div class="stat-content">
        <div class="stat-value" [class.loading]="loading">{{ loading ? '...' : (stats.outstandingOrders || 0) }}</div>
        <div class="stat-label">Outstanding Orders</div>
        <div class="stat-description">Pending orders</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <span nz-icon nzType="exclamation-circle"></span>
      </div>
      <div class="stat-content">
        <div class="stat-value" [class.loading]="loading">{{ loading ? '...' : (stats.amountDue | currencyFormat) }}</div>
        <div class="stat-label">Amount Due</div>
        <div class="stat-description">Outstanding balance</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <span nz-icon nzType="dollar-circle"></span>
      </div>
      <div class="stat-content">
        <div class="stat-value" [class.loading]="loading">{{ loading ? '...' : (stats.totalPaid | currencyFormat) }}</div>
        <div class="stat-label">Total Paid</div>
        <div class="stat-description">Completed payments</div>
      </div>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Quick Actions -->
    <div class="content-card">
      <div class="card-header">
        <h3>
          <span nz-icon nzType="thunderbolt"></span>
          Quick Actions
        </h3>
        <p>Common client tasks</p>
      </div>
      <div class="card-content">
        <div class="action-buttons">
          <button type="button" class="btn btn-lg btn-primary" routerLink="/orders/new">
            <span nz-icon nzType="plus"></span>
            Create New Order
          </button>
          <button type="button" class="btn btn-lg btn-primary" routerLink="/orders">
            <span nz-icon nzType="file-text"></span>
            Order Management
          </button>
          <button type="button" class="btn btn-lg btn-primary" routerLink="/invoices">
            <span nz-icon nzType="file-done"></span>
            Invoice Center
          </button>
          <button type="button" class="btn btn-lg btn-secondary" routerLink="/cart">
            <span nz-icon nzType="shopping-cart"></span>
            Shopping Cart
          </button>
          <button type="button" class="btn btn-lg btn-secondary" routerLink="/shop">
            <span nz-icon nzType="shop"></span>
            Product Catalog
          </button>
          <button type="button" class="btn btn-lg btn-secondary" routerLink="/profile">
            <span nz-icon nzType="user"></span>
            Account Settings
          </button>
        </div>
      </div>
    </div>

    <!-- Recent Invoices -->
    <div class="content-card">
      <div class="card-header">
        <h3>
          <span nz-icon nzType="file-text"></span>
          Recent Invoices
        </h3>
        <p>Latest invoice activity</p>
      </div>
      <div class="card-content">
        <div class="invoice-list" *ngIf="!loadingInvoices; else invoiceLoading">
          <div class="invoice-item" *ngFor="let invoice of recentInvoices">
            <div class="invoice-icon">
              <span nz-icon nzType="file-text"></span>
            </div>
            <div class="invoice-content">
              <div class="invoice-header">
                <div class="invoice-number">
                  <a [routerLink]="['/invoices', invoice.id]" class="invoice-link">
                    {{ invoice.invoiceNumber }}
                  </a>
                </div>
                <div class="invoice-status" [ngClass]="invoice.status.toLowerCase()">
                  {{ invoice.status }}
                </div>
              </div>
              <div class="invoice-details">
                <div class="invoice-amount">{{ invoice.grandTotal | currencyFormat }}</div>
                <div class="invoice-date">{{ invoice.createdAt | date:'short' }}</div>
              </div>
            </div>
          </div>
          <div class="no-data" *ngIf="recentInvoices.length === 0">
            <span nz-icon nzType="inbox"></span>
            <p>No recent invoices</p>
          </div>
        </div>
        <ng-template #invoiceLoading>
          <div class="loading-skeleton">
            <div class="skeleton-item" *ngFor="let item of [1,2,3]"></div>
          </div>
        </ng-template>
      </div>
    </div>

    <!-- Account Info -->
    <div class="content-card">
      <div class="card-header">
        <h3>
          <span nz-icon nzType="user"></span>
          Account Info
        </h3>
        <p>Your account details</p>
      </div>
      <div class="card-content">
        <div class="account-list" *ngIf="!loadingAccount; else accountLoading">
          <div class="account-item" *ngFor="let info of accountInfo">
            <div class="account-indicator" [ngClass]="info.status"></div>
            <div class="account-content">
              <div class="account-label">{{ info.label }}</div>
              <div class="account-value">{{ info.value }}</div>
            </div>
          </div>
          <div class="no-data" *ngIf="accountInfo.length === 0">
            <span nz-icon nzType="info-circle"></span>
            <p>Account info unavailable</p>
          </div>
        </div>
        <ng-template #accountLoading>
          <div class="loading-skeleton">
            <div class="skeleton-item" *ngFor="let item of [1,2,3]"></div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>