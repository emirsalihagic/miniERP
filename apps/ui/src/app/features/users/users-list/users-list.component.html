<div class="users-list-container">
  <div class="page-header">
    <h1>Users Management</h1>
    <button type="button" class="btn btn-primary" (click)="createUser()">
      <span nz-icon nzType="plus"></span>
      Create User
    </button>
  </div>

  <nz-card>
    <nz-table
      #usersTable
      [nzData]="users"
      [nzLoading]="loading"
      [nzTotal]="total"
      [nzPageSize]="pageSize"
      [nzPageIndex]="pageIndex"
      [nzShowSizeChanger]="true"
      [nzShowQuickJumper]="true"
      [nzShowTotal]="totalTemplate"
      (nzPageIndexChange)="onPageIndexChange($event)"
      (nzPageSizeChange)="onPageSizeChange($event)"
    >
      <thead>
        <tr>
          <th nzColumnKey="name" nzSortOrder="ascend">Name</th>
          <th nzColumnKey="email">Email</th>
          <th nzColumnKey="role">Role</th>
          <th nzColumnKey="verified">Email Verified</th>
          <th nzColumnKey="created">Created</th>
          <th nzColumnKey="actions">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>
            <div class="user-name">
              <strong>{{ user.firstName }} {{ user.lastName }}</strong>
            </div>
          </td>
          <td>{{ user.email }}</td>
          <td>
            <nz-tag [nzColor]="getRoleColor(user.role)">
              {{ getRoleDisplayName(user.role) }}
            </nz-tag>
          </td>
          <td>
            <nz-tag [nzColor]="user.isEmailVerified ? 'green' : 'red'">
              {{ user.isEmailVerified ? 'Verified' : 'Not Verified' }}
            </nz-tag>
          </td>
          <td>{{ user.createdAt | date:'short' }}</td>
          <td>
            <nz-space>
              <button *nzSpaceItem type="button" class="btn btn-sm btn-outline" (click)="editUser(user)">
                <span nz-icon nzType="edit"></span>
                Edit
              </button>
              <button *nzSpaceItem type="button" class="btn btn-sm btn-danger" (click)="deleteUser(user)">
                <span nz-icon nzType="delete"></span>
                Delete
              </button>
            </nz-space>
          </td>
        </tr>
      </tbody>
    </nz-table>

    <ng-template #totalTemplate let-total let-range="range">
      {{ range[0] }}-{{ range[1] }} of {{ total }} users
    </ng-template>
  </nz-card>
</div>
